import{f as l,l as h,a as m,r as i,j as e,m as g,g as x,s as y,_ as j}from"./index-24ae16bc.js";import{B as v}from"./index.esm-ddb45e6d.js";const S=()=>{const{cartItems:o,total:c}=l(a=>a.cartReducer),s=h(),u=m(),[t,p]=i.useState({address:"",city:"",state:"",country:"",pinCode:""}),n=a=>{p(r=>({...r,[a.target.name]:a.target.value}))},d=async a=>{a.preventDefault(),u(g(t));try{const{data:r}=await x.post(`${y}/api/v1/payment/create`,{amount:c,currency:"inr",description:"Purchase from Your Store"},{headers:{"Content-Type":"application/json"}});s("/pay",{state:r.clientSecret})}catch(r){console.log(r),j.error("Something went wrong")}};return i.useEffect(()=>{if(o.length<=0)return s("/cart")},[o]),e.jsxs("div",{className:"shipping",children:[e.jsx("button",{className:"back-btn",onClick:()=>s("/cart"),children:e.jsx(v,{})}),e.jsxs("form",{onSubmit:d,children:[e.jsx("h1",{children:"Shipping Address"}),e.jsx("input",{required:!0,type:"text",placeholder:"Address",name:"address",value:t.address,onChange:n}),e.jsx("input",{required:!0,type:"text",placeholder:"City",name:"city",value:t.city,onChange:n}),e.jsx("input",{required:!0,type:"text",placeholder:"State",name:"state",value:t.state,onChange:n}),e.jsxs("select",{name:"country",required:!0,value:t.country,onChange:n,children:[e.jsx("option",{value:"",children:"Choose Country"}),e.jsx("option",{value:"india",children:"India"})]}),e.jsx("input",{required:!0,type:"number",placeholder:"Pin Code",name:"pinCode",value:t.pinCode,onChange:n}),e.jsx("button",{type:"submit",children:"Pay Now"})]})]})};export{S as default};
